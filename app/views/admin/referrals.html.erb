<div id="fullpage">

  <div class="section global-nav">
    <div class="row justify-content-end">
      <%= render partial: 'layouts/nav' %>
    </div>
  </div>

  <section class="admin-content full-height brand-background text-center">
    <%= render partial: 'layouts/alerts' %>
    <div class="row">
      <div class="col">
        <h2>Referrals</h2>
      </div>
      <table class="table table-striped table-dark table-hover table-sm">
        <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Referrer ID</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Status</th>
          <th scope="col">Referee Email </th>
          <th scope="col">ID</th>
          <th scope="col">Name</th>
          <th scope="col">Created At</th>
          <th scope="col">Updated At</th>
        </tr>
        </thead>
        <tbody>
        <% Referral.all.order(:id).each do |ref| %>
          <tr>
            <th scope="row"><%= ref.id %></th>
            <td><%= ref.user.id %></td>
            <td><%= ref.user.first_name %> <%= ref.user.last_name %></td>
            <td><%= ref.user.email %></td>
            <td><%= ref.status %></td>
            <td><%= ref.email %></td>
            <% if ref.referred_user_id %>
              <td><%= ref.referred_user_id %></td>
              <td>
                <% u = User.where(id: ref.referred_user_id) %>
                <%= u.first.first_name %> <%= u.first.last_name %>
              </td>
            <% else %>
              <td></td>
              <td></td>
            <% end %>

            <td><%= time_ago_in_words(ref.created_at) %></td>
            <td><%= time_ago_in_words(ref.updated_at) %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div> <!--End Row-->
  </section> <!--End Section-->

</div>
